{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import axios from'axios';import'./Table.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function FondoPensionList(){const[fondos,setFondos]=useState([]);const[sortConfig,setSortConfig]=useState({key:null,direction:'ascending'});const[columns,setColumns]=useState([{key:'id_fondo',label:'ID',width:100},{key:'nom_fondo',label:'Nombre',width:200},{key:'pct_fondo',label:'Porcentaje fondo',width:150},{key:'pct_comision',label:'Porcentaje Comision',width:150},{key:'pct_seguro',label:'Porcentaje Seguro',width:150}]);useEffect(()=>{const fetchFondos=async()=>{try{const response=await axios.get('http://localhost:5000/api/fondos-pension');console.log('Fondos de pensión recibidos:',response.data);setFondos(response.data);}catch(error){console.error('Error fetching fondos de pensión:',error);}};fetchFondos();},[]);const requestSort=key=>{let direction='ascending';if(sortConfig.key===key&&sortConfig.direction==='ascending'){direction='descending';}setSortConfig({key,direction});};const sortedFondos=React.useMemo(()=>{let sortableFondos=[...fondos];if(sortConfig.key!==null){sortableFondos.sort((a,b)=>{if(a.fields[sortConfig.key]<b.fields[sortConfig.key]){return sortConfig.direction==='ascending'?-1:1;}if(a.fields[sortConfig.key]>b.fields[sortConfig.key]){return sortConfig.direction==='ascending'?1:-1;}return 0;});}return sortableFondos;},[fondos,sortConfig]);const handleResize=useCallback((index,newWidth)=>{setColumns(prevColumns=>{const newColumns=[...prevColumns];newColumns[index]={...newColumns[index],width:newWidth};return newColumns;});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"table-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Listado de Fondos de Pensi\\xF3n\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"resizable-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:columns.map((column,index)=>/*#__PURE__*/_jsxs(\"th\",{onClick:()=>requestSort(column.key),style:{width:`${column.width}px`,minWidth:`${column.width}px`},children:[column.label,sortConfig.key===column.key&&/*#__PURE__*/_jsx(\"span\",{children:sortConfig.direction==='ascending'?' ▲':' ▼'}),/*#__PURE__*/_jsx(\"div\",{className:\"resizer\",onMouseDown:e=>{const startX=e.pageX;const startWidth=column.width;const handleMouseMove=e=>{handleResize(index,Math.max(50,startWidth+e.pageX-startX));};document.addEventListener('mousemove',handleMouseMove);document.addEventListener('mouseup',()=>{document.removeEventListener('mousemove',handleMouseMove);},{once:true});}})]},column.key))})}),/*#__PURE__*/_jsx(\"tbody\",{children:sortedFondos.map(fondo=>/*#__PURE__*/_jsx(\"tr\",{children:columns.map(column=>/*#__PURE__*/_jsx(\"td\",{style:{width:`${column.width}px`,minWidth:`${column.width}px`},children:fondo.fields[column.key]},column.key))},fondo.id))})]})]});}export default FondoPensionList;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","jsx","_jsx","jsxs","_jsxs","FondoPensionList","fondos","setFondos","sortConfig","setSortConfig","key","direction","columns","setColumns","label","width","fetchFondos","response","get","console","log","data","error","requestSort","sortedFondos","useMemo","sortableFondos","sort","a","b","fields","handleResize","index","newWidth","prevColumns","newColumns","className","children","map","column","onClick","style","minWidth","onMouseDown","e","startX","pageX","startWidth","handleMouseMove","Math","max","document","addEventListener","removeEventListener","once","fondo","id"],"sources":["C:/PROYECTOS IA/Planillas/frontend/src/components/FondoPensionList.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport './Table.css';\r\n\r\nfunction FondoPensionList() {\r\n  const [fondos, setFondos] = useState([]);\r\n  const [sortConfig, setSortConfig] = useState({ key: null, direction: 'ascending' });\r\n  const [columns, setColumns] = useState([\r\n    { key: 'id_fondo', label: 'ID', width: 100 },\r\n    { key: 'nom_fondo', label: 'Nombre', width: 200 },\r\n    { key: 'pct_fondo', label: 'Porcentaje fondo', width: 150 },\r\n    { key: 'pct_comision', label: 'Porcentaje Comision', width: 150 },\r\n    { key: 'pct_seguro', label: 'Porcentaje Seguro', width: 150 }\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const fetchFondos = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:5000/api/fondos-pension');\r\n        console.log('Fondos de pensión recibidos:', response.data);\r\n        setFondos(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching fondos de pensión:', error);\r\n      }\r\n    };\r\n\r\n    fetchFondos();\r\n  }, []);\r\n\r\n  const requestSort = (key) => {\r\n    let direction = 'ascending';\r\n    if (sortConfig.key === key && sortConfig.direction === 'ascending') {\r\n      direction = 'descending';\r\n    }\r\n    setSortConfig({ key, direction });\r\n  };\r\n\r\n  const sortedFondos = React.useMemo(() => {\r\n    let sortableFondos = [...fondos];\r\n    if (sortConfig.key !== null) {\r\n      sortableFondos.sort((a, b) => {\r\n        if (a.fields[sortConfig.key] < b.fields[sortConfig.key]) {\r\n          return sortConfig.direction === 'ascending' ? -1 : 1;\r\n        }\r\n        if (a.fields[sortConfig.key] > b.fields[sortConfig.key]) {\r\n          return sortConfig.direction === 'ascending' ? 1 : -1;\r\n        }\r\n        return 0;\r\n      });\r\n    }\r\n    return sortableFondos;\r\n  }, [fondos, sortConfig]);\r\n\r\n  const handleResize = useCallback((index, newWidth) => {\r\n    setColumns(prevColumns => {\r\n      const newColumns = [...prevColumns];\r\n      newColumns[index] = { ...newColumns[index], width: newWidth };\r\n      return newColumns;\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"table-container\">\r\n      <h2>Listado de Fondos de Pensión</h2>\r\n      <table className=\"resizable-table\">\r\n        <thead>\r\n          <tr>\r\n            {columns.map((column, index) => (\r\n              <th \r\n                key={column.key} \r\n                onClick={() => requestSort(column.key)}\r\n                style={{ width: `${column.width}px`, minWidth: `${column.width}px` }}\r\n              >\r\n                {column.label}\r\n                {sortConfig.key === column.key && (\r\n                  <span>{sortConfig.direction === 'ascending' ? ' ▲' : ' ▼'}</span>\r\n                )}\r\n                <div\r\n                  className=\"resizer\"\r\n                  onMouseDown={(e) => {\r\n                    const startX = e.pageX;\r\n                    const startWidth = column.width;\r\n                    const handleMouseMove = (e) => {\r\n                      handleResize(index, Math.max(50, startWidth + e.pageX - startX));\r\n                    };\r\n                    document.addEventListener('mousemove', handleMouseMove);\r\n                    document.addEventListener('mouseup', () => {\r\n                      document.removeEventListener('mousemove', handleMouseMove);\r\n                    }, { once: true });\r\n                  }}\r\n                />\r\n              </th>\r\n            ))}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {sortedFondos.map(fondo => (\r\n            <tr key={fondo.id}>\r\n              {columns.map(column => (\r\n                <td key={column.key} style={{ width: `${column.width}px`, minWidth: `${column.width}px` }}>\r\n                  {fondo.fields[column.key]}\r\n                </td>\r\n              ))}\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FondoPensionList;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErB,QAAS,CAAAC,gBAAgBA,CAAA,CAAG,CAC1B,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACW,UAAU,CAAEC,aAAa,CAAC,CAAGZ,QAAQ,CAAC,CAAEa,GAAG,CAAE,IAAI,CAAEC,SAAS,CAAE,WAAY,CAAC,CAAC,CACnF,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,CACrC,CAAEa,GAAG,CAAE,UAAU,CAAEI,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,GAAI,CAAC,CAC5C,CAAEL,GAAG,CAAE,WAAW,CAAEI,KAAK,CAAE,QAAQ,CAAEC,KAAK,CAAE,GAAI,CAAC,CACjD,CAAEL,GAAG,CAAE,WAAW,CAAEI,KAAK,CAAE,kBAAkB,CAAEC,KAAK,CAAE,GAAI,CAAC,CAC3D,CAAEL,GAAG,CAAE,cAAc,CAAEI,KAAK,CAAE,qBAAqB,CAAEC,KAAK,CAAE,GAAI,CAAC,CACjE,CAAEL,GAAG,CAAE,YAAY,CAAEI,KAAK,CAAE,mBAAmB,CAAEC,KAAK,CAAE,GAAI,CAAC,CAC9D,CAAC,CAEFjB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAjB,KAAK,CAACkB,GAAG,CAAC,0CAA0C,CAAC,CAC5EC,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAEH,QAAQ,CAACI,IAAI,CAAC,CAC1Dd,SAAS,CAACU,QAAQ,CAACI,IAAI,CAAC,CAC1B,CAAE,MAAOC,KAAK,CAAE,CACdH,OAAO,CAACG,KAAK,CAAC,mCAAmC,CAAEA,KAAK,CAAC,CAC3D,CACF,CAAC,CAEDN,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAO,WAAW,CAAIb,GAAG,EAAK,CAC3B,GAAI,CAAAC,SAAS,CAAG,WAAW,CAC3B,GAAIH,UAAU,CAACE,GAAG,GAAKA,GAAG,EAAIF,UAAU,CAACG,SAAS,GAAK,WAAW,CAAE,CAClEA,SAAS,CAAG,YAAY,CAC1B,CACAF,aAAa,CAAC,CAAEC,GAAG,CAAEC,SAAU,CAAC,CAAC,CACnC,CAAC,CAED,KAAM,CAAAa,YAAY,CAAG5B,KAAK,CAAC6B,OAAO,CAAC,IAAM,CACvC,GAAI,CAAAC,cAAc,CAAG,CAAC,GAAGpB,MAAM,CAAC,CAChC,GAAIE,UAAU,CAACE,GAAG,GAAK,IAAI,CAAE,CAC3BgB,cAAc,CAACC,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,CAC5B,GAAID,CAAC,CAACE,MAAM,CAACtB,UAAU,CAACE,GAAG,CAAC,CAAGmB,CAAC,CAACC,MAAM,CAACtB,UAAU,CAACE,GAAG,CAAC,CAAE,CACvD,MAAO,CAAAF,UAAU,CAACG,SAAS,GAAK,WAAW,CAAG,CAAC,CAAC,CAAG,CAAC,CACtD,CACA,GAAIiB,CAAC,CAACE,MAAM,CAACtB,UAAU,CAACE,GAAG,CAAC,CAAGmB,CAAC,CAACC,MAAM,CAACtB,UAAU,CAACE,GAAG,CAAC,CAAE,CACvD,MAAO,CAAAF,UAAU,CAACG,SAAS,GAAK,WAAW,CAAG,CAAC,CAAG,CAAC,CAAC,CACtD,CACA,MAAO,EAAC,CACV,CAAC,CAAC,CACJ,CACA,MAAO,CAAAe,cAAc,CACvB,CAAC,CAAE,CAACpB,MAAM,CAAEE,UAAU,CAAC,CAAC,CAExB,KAAM,CAAAuB,YAAY,CAAGhC,WAAW,CAAC,CAACiC,KAAK,CAAEC,QAAQ,GAAK,CACpDpB,UAAU,CAACqB,WAAW,EAAI,CACxB,KAAM,CAAAC,UAAU,CAAG,CAAC,GAAGD,WAAW,CAAC,CACnCC,UAAU,CAACH,KAAK,CAAC,CAAG,CAAE,GAAGG,UAAU,CAACH,KAAK,CAAC,CAAEjB,KAAK,CAAEkB,QAAS,CAAC,CAC7D,MAAO,CAAAE,UAAU,CACnB,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE/B,KAAA,QAAKgC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BnC,IAAA,OAAAmC,QAAA,CAAI,iCAA4B,CAAI,CAAC,cACrCjC,KAAA,UAAOgC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAChCnC,IAAA,UAAAmC,QAAA,cACEnC,IAAA,OAAAmC,QAAA,CACGzB,OAAO,CAAC0B,GAAG,CAAC,CAACC,MAAM,CAAEP,KAAK,gBACzB5B,KAAA,OAEEoC,OAAO,CAAEA,CAAA,GAAMjB,WAAW,CAACgB,MAAM,CAAC7B,GAAG,CAAE,CACvC+B,KAAK,CAAE,CAAE1B,KAAK,CAAE,GAAGwB,MAAM,CAACxB,KAAK,IAAI,CAAE2B,QAAQ,CAAE,GAAGH,MAAM,CAACxB,KAAK,IAAK,CAAE,CAAAsB,QAAA,EAEpEE,MAAM,CAACzB,KAAK,CACZN,UAAU,CAACE,GAAG,GAAK6B,MAAM,CAAC7B,GAAG,eAC5BR,IAAA,SAAAmC,QAAA,CAAO7B,UAAU,CAACG,SAAS,GAAK,WAAW,CAAG,IAAI,CAAG,IAAI,CAAO,CACjE,cACDT,IAAA,QACEkC,SAAS,CAAC,SAAS,CACnBO,WAAW,CAAGC,CAAC,EAAK,CAClB,KAAM,CAAAC,MAAM,CAAGD,CAAC,CAACE,KAAK,CACtB,KAAM,CAAAC,UAAU,CAAGR,MAAM,CAACxB,KAAK,CAC/B,KAAM,CAAAiC,eAAe,CAAIJ,CAAC,EAAK,CAC7Bb,YAAY,CAACC,KAAK,CAAEiB,IAAI,CAACC,GAAG,CAAC,EAAE,CAAEH,UAAU,CAAGH,CAAC,CAACE,KAAK,CAAGD,MAAM,CAAC,CAAC,CAClE,CAAC,CACDM,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAEJ,eAAe,CAAC,CACvDG,QAAQ,CAACC,gBAAgB,CAAC,SAAS,CAAE,IAAM,CACzCD,QAAQ,CAACE,mBAAmB,CAAC,WAAW,CAAEL,eAAe,CAAC,CAC5D,CAAC,CAAE,CAAEM,IAAI,CAAE,IAAK,CAAC,CAAC,CACpB,CAAE,CACH,CAAC,GArBGf,MAAM,CAAC7B,GAsBV,CACL,CAAC,CACA,CAAC,CACA,CAAC,cACRR,IAAA,UAAAmC,QAAA,CACGb,YAAY,CAACc,GAAG,CAACiB,KAAK,eACrBrD,IAAA,OAAAmC,QAAA,CACGzB,OAAO,CAAC0B,GAAG,CAACC,MAAM,eACjBrC,IAAA,OAAqBuC,KAAK,CAAE,CAAE1B,KAAK,CAAE,GAAGwB,MAAM,CAACxB,KAAK,IAAI,CAAE2B,QAAQ,CAAE,GAAGH,MAAM,CAACxB,KAAK,IAAK,CAAE,CAAAsB,QAAA,CACvFkB,KAAK,CAACzB,MAAM,CAACS,MAAM,CAAC7B,GAAG,CAAC,EADlB6B,MAAM,CAAC7B,GAEZ,CACL,CAAC,EALK6C,KAAK,CAACC,EAMX,CACL,CAAC,CACG,CAAC,EACH,CAAC,EACL,CAAC,CAEV,CAEA,cAAe,CAAAnD,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}