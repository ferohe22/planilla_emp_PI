{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import axios from'axios';import'./Table.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PlayrollsList(){const[payrolls,setpayrolls]=useState([]);const[sortConfig,setSortConfig]=useState({key:null,direction:'ascending'});const[columns,setColumns]=useState([{key:'id_salario',label:'ID',width:100},{key:'Base',label:'Monto Basico',width:150}]);useEffect(()=>{const fetchpayrolls=async()=>{try{const response=await axios.get('http://localhost:5000/api/nominas');setpayrolls(response.data);}catch(error){console.error('Error fetching payrolls:',error);}};fetchpayrolls();},[]);const requestSort=key=>{let direction='ascending';if(sortConfig.key===key&&sortConfig.direction==='ascending'){direction='descending';}setSortConfig({key,direction});};const sortedpayrolls=React.useMemo(()=>{let sortablepayrolls=[...payrolls];if(sortConfig.key!==null){sortablepayrolls.sort((a,b)=>{if(a[sortConfig.key]<b[sortConfig.key]){return sortConfig.direction==='ascending'?-1:1;}if(a[sortConfig.key]>b[sortConfig.key]){return sortConfig.direction==='ascending'?1:-1;}return 0;});}return sortablepayrolls;},[payrolls,sortConfig]);const handleResize=useCallback((index,newWidth)=>{setColumns(prevColumns=>{const newColumns=[...prevColumns];newColumns[index]={...newColumns[index],width:newWidth};return newColumns;});},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Listado de Empleados\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:columns.map((column,index)=>/*#__PURE__*/_jsxs(\"th\",{onClick:()=>requestSort(column.key),style:{width:column.width},children:[column.label,sortConfig.key===column.key&&/*#__PURE__*/_jsx(\"span\",{children:sortConfig.direction==='ascending'?' ▲':' ▼'}),/*#__PURE__*/_jsx(\"div\",{className:\"resizer\",onMouseDown:e=>{const startX=e.pageX;const startWidth=column.width;const handleMouseMove=e=>{handleResize(index,startWidth+e.pageX-startX);};document.addEventListener('mousemove',handleMouseMove);document.addEventListener('mouseup',()=>{document.removeEventListener('mousemove',handleMouseMove);},{once:true});}})]},column.key))})}),/*#__PURE__*/_jsx(\"tbody\",{children:sortedpayrolls.map(playrolls=>/*#__PURE__*/_jsx(\"tr\",{children:columns.map(column=>/*#__PURE__*/_jsx(\"td\",{style:{width:column.width},children:playrolls[column.key]},column.key))},playrolls.id))})]})]});}export default PlayrollsList;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","jsx","_jsx","jsxs","_jsxs","PlayrollsList","payrolls","setpayrolls","sortConfig","setSortConfig","key","direction","columns","setColumns","label","width","fetchpayrolls","response","get","data","error","console","requestSort","sortedpayrolls","useMemo","sortablepayrolls","sort","a","b","handleResize","index","newWidth","prevColumns","newColumns","children","map","column","onClick","style","className","onMouseDown","e","startX","pageX","startWidth","handleMouseMove","document","addEventListener","removeEventListener","once","playrolls","id"],"sources":["C:/PROYECTOS IA/Planillas/frontend/src/components/PayrollList.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport './Table.css';\r\n\r\nfunction PlayrollsList() {\r\n  const [payrolls, setpayrolls] = useState([]);\r\n  const [sortConfig, setSortConfig] = useState({ key: null, direction: 'ascending' });\r\n  const [columns, setColumns] = useState([\r\n    { key: 'id_salario', label: 'ID', width: 100 },\r\n    { key: 'Base', label: 'Monto Basico', width: 150 },\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const fetchpayrolls = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:5000/api/nominas');\r\n        setpayrolls(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching payrolls:', error);\r\n      }\r\n    };\r\n\r\n    fetchpayrolls();\r\n  }, []);\r\n\r\n  const requestSort = (key) => {\r\n    let direction = 'ascending';\r\n    if (sortConfig.key === key && sortConfig.direction === 'ascending') {\r\n      direction = 'descending';\r\n    }\r\n    setSortConfig({ key, direction });\r\n  };\r\n\r\n  const sortedpayrolls = React.useMemo(() => {\r\n    let sortablepayrolls = [...payrolls];\r\n    if (sortConfig.key !== null) {\r\n      sortablepayrolls.sort((a, b) => {\r\n        if (a[sortConfig.key] < b[sortConfig.key]) {\r\n          return sortConfig.direction === 'ascending' ? -1 : 1;\r\n        }\r\n        if (a[sortConfig.key] > b[sortConfig.key]) {\r\n          return sortConfig.direction === 'ascending' ? 1 : -1;\r\n        }\r\n        return 0;\r\n      });\r\n    }\r\n    return sortablepayrolls;\r\n  }, [payrolls, sortConfig]);\r\n\r\n  const handleResize = useCallback((index, newWidth) => {\r\n    setColumns(prevColumns => {\r\n      const newColumns = [...prevColumns];\r\n      newColumns[index] = { ...newColumns[index], width: newWidth };\r\n      return newColumns;\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <h2>Listado de Empleados</h2>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            {columns.map((column, index) => (\r\n              <th \r\n                key={column.key} \r\n                onClick={() => requestSort(column.key)}\r\n                style={{ width: column.width }}\r\n              >\r\n                {column.label}\r\n                {sortConfig.key === column.key && (\r\n                  <span>{sortConfig.direction === 'ascending' ? ' ▲' : ' ▼'}</span>\r\n                )}\r\n                <div\r\n                  className=\"resizer\"\r\n                  onMouseDown={(e) => {\r\n                    const startX = e.pageX;\r\n                    const startWidth = column.width;\r\n                    const handleMouseMove = (e) => {\r\n                      handleResize(index, startWidth + e.pageX - startX);\r\n                    };\r\n                    document.addEventListener('mousemove', handleMouseMove);\r\n                    document.addEventListener('mouseup', () => {\r\n                      document.removeEventListener('mousemove', handleMouseMove);\r\n                    }, { once: true });\r\n                  }}\r\n                />\r\n              </th>\r\n            ))}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {sortedpayrolls.map(playrolls => (\r\n            <tr key={playrolls.id}>\r\n              {columns.map(column => (\r\n                <td key={column.key} style={{ width: column.width }}>{playrolls[column.key]}</td>\r\n              ))}\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PlayrollsList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}